# ═══════════════════════════════════════════════════════════════
# Knowledge Base RAG Service — Environment Variables
# ═══════════════════════════════════════════════════════════════
#
# Only STORE_TYPE + its DB credentials are required to start
# the server. Everything else is optional and errors lazily
# when the unconfigured feature is accessed.
#
# ─── Store (REQUIRED — at least one) ─────────────────────────
# Options: mongo | postgres
STORE_TYPE=mongo

# MongoDB (required when STORE_TYPE=mongo)
MONGODB_URI=mongodb+srv://...
MONGODB_DB_NAME=knowledge_base

# PostgreSQL (required when STORE_TYPE=postgres)
# Tables are auto-created at startup via store.setup().
# See src/connection/pg/postgres_queries.sql for the reference schema.
# POSTGRES_URL=postgresql://user:password@localhost:5432/knowledge_base

# ─── Embedding Model (optional) ─────────────────────────────
# When unset, embedding/RAG/ingestion features are unavailable.
# Valid providers: AZURE | OPENAI | DEEPSEEK | OLLAMA | CUSTOM
# EMBED_MODEL_PROVIDER=OPENAI
# EMBED_API_KEY=sk-...
# EMBED_MODEL_NAME=text-embedding-3-small
# EMBED_BASE_URL=                        # leave blank for default; required for CUSTOM
# EMBED_DIMENSIONS=1024                  # must match model output

# ─── Chat Model (optional) ──────────────────────────────────
# When unset, the /api/chat endpoint returns 503.
# Valid providers: AZURE | OPENAI | DEEPSEEK | OLLAMA | CUSTOM
# CHAT_MODEL_PROVIDER=OPENAI
# CHAT_API_KEY=sk-...
# CHAT_MODEL_NAME=gpt-4o
# CHAT_BASE_URL=                         # leave blank for default; required for CUSTOM

# ─── Azure OpenAI specific ──────────────────────────────────
# Only needed when CHAT_MODEL_PROVIDER=AZURE or EMBED_MODEL_PROVIDER=AZURE.
# AZURE_OPENAI_API_VERSION=2024-02-01
#
# When using Azure, set the env vars like this:
#   EMBED_MODEL_PROVIDER=AZURE
#   EMBED_API_KEY=<azure-openai-key>
#   EMBED_BASE_URL=https://yourname.openai.azure.com
#   EMBED_MODEL_NAME=text-embedding-3-small       # deployment name
#
#   CHAT_MODEL_PROVIDER=AZURE
#   CHAT_API_KEY=<azure-openai-key>
#   CHAT_BASE_URL=https://yourname.openai.azure.com
#   CHAT_MODEL_NAME=gpt-4o                        # deployment name

# ─── DeepSeek example ───────────────────────────────────────
#   CHAT_MODEL_PROVIDER=DEEPSEEK
#   CHAT_API_KEY=sk-...
#   CHAT_MODEL_NAME=deepseek-chat
#   (CHAT_BASE_URL defaults to https://api.deepseek.com)

# ─── Ollama example (local, no API key needed) ──────────────
#   EMBED_MODEL_PROVIDER=OLLAMA
#   EMBED_MODEL_NAME=nomic-embed-text
#   EMBED_BASE_URL=http://localhost:11434
#   EMBED_DIMENSIONS=768

# ─── CUSTOM example (any OpenAI-compatible API) ─────────────
#   EMBED_MODEL_PROVIDER=CUSTOM
#   EMBED_API_KEY=sk-...
#   EMBED_MODEL_NAME=custom-embed-model
#   EMBED_BASE_URL=https://my-embeddings-api.example.com/v1
#   EMBED_DIMENSIONS=1024

# ─── Microsoft Graph (optional) ─────────────────────────────
# Set AZURE_SOURCE=Y to enable Teams transcript & distribution
# list ingestion via Microsoft Graph API. When disabled (default),
# those features return 503 and cron jobs are skipped.
# AZURE_SOURCE=Y
# AZURE_TENANT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
# AZURE_CLIENT_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
# AZURE_CLIENT_SECRET=your-secret-value

# ─── Server ─────────────────────────────────────────────────
PORT=3000
LOG_LEVEL=info


STORE_TYPE=postgres
POSTGRES_URL=postgresql://localhost:5432/kb

EMBED_MODEL_PROVIDER=OLLAMA
EMBED_API_KEY=
EMBED_MODEL_NAME=qwen3-embedding:8b-q4_K_M # nomic-embed-text (768), mxbai-embed-large (1024), qwen3-embedding:0.6b (1024), qwen3-embedding (1024)
EMBED_BASE_URL="http://localhost:11434" # leave blank for default; required for CUSTOM
EMBED_DIMENSIONS=1024                  # must match model output
